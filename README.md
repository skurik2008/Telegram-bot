## Телеграм-бот

### Имя.
TriA_bot (@SkurikBot)

### Что умеет.
Телеграм-бот для быстрого подбора отелей с сайта бронирования [Hotels.com](https://www.hotels.com), отвечающим заданным критериям отбора.

### Список команд.
- `/help` - выводит список всех команд
- `/lowprice` - вывод самых дешевых отелей в городе
- `/highprice` - вывод самых дорогих отелей в городе
- `/bestdeal` - вывод отелей, наиболее подходящих по цене и расположению от центра
- `/history` - вывод истории поиска отелей

### Команда `/lowprice`, `/highprice`
**Бот запрашивает:**
1. Город для поиска
2. Дату заезда
3. Дату выезда
4. Количество отелей для вывода
5. Необходимость загрузки фото для каждого отеля
6. Количество фото (в случае ответа "Да" на п.5)

**Результат команды:**

Список отелей. Информация по каждому отелю включает:
- название отеля
- адрес
- расстояние до центра
- цена за ночь
- стоимость за введенный период
- ссылку на страницу отеля на сайте
- фото (если был запрос со стороны пользователя на это)

### Команда `/bestdeal`
**Бот запрашивает:**
1. Город для поиска
2. Дату заезда
3. Дату выезда
4. Минимальную цену
5. Максимальную цену
6. Минимальное удаление от центра
7. Максимальное удалениие от центра
8. Количество отелей для вывода
9. Необходимость загрузки фото для каждого отеля
10. Количество фото (в случае ответа "Да" на п.9)

**Результат команды:**


Список отелей. Информация по каждому отелю включает:
- название отеля
- адрес
- расстояние до центра
- цена за ночь
- стоимость за введенный период
- ссылку на страницу отеля на сайте
- фото (если был запрос со стороны пользователя на это)

### Команда `/history`
**Бот запрашивает** 
1. Дату истории поиска (максимальный "взгляд назад" - 7 дней)

**Результат команды:**

Список команд, которые вводились в эту дату. Информация по каждой команде включает:
- название команды
- дату и время ввода
- город поиска отелей
- список найденных отелей с ссылками на их страницы на сайте

### Установка и запуск
1. **Регистрация вашего бота в Telegram через @BotFather:**

	- найдите бота [@BotFather](https://t.me/BotFather) в Телеграм. Это официальный бот, созданный специально для управления ботами.
	- отправьте ему команду `/newbot`
	- @BotFather спросит вас, как вы назовёте вашего бота. Следующим сообщением отправьте его название, заканчивающееся на «_bot».
	- запишите либо сохраните полученный **ТОКЕН** от @BotFather — это ключ для работы с Telegram API.


2. **Получение доступа к API Hotels, который расположен на сайте [rapidapi.com](https://rapidapi.com) (здесь предлагается вариант бесплатого пакета на 500 запросов в месяц):**

	- зарегистрируйтесь на сайте [rapidapi.com](https://rapidapi.com).
	- перейдите в категорию **Travel** > **Hotels** (либо по прямой ссылке на документацию [Hotels API Documentation](https://rapidapi.com/apidojo/api/hotels4/))
	- нажмите кнопку Subscribe to Test
	- выберите бесплатный пакет (Basic)
	- на странице ([Hotels API Documentation](https://rapidapi.com/apidojo/api/hotels4/)) найдите значение **X-RapidAPI-Key**. Запишите его, а лучше скопируйте его из фрагментов кода в правой части странички и сохраните. Выглядит это так: `'X-RapidAPI-Key': '0e5635b94fmsh957d5d88ea1e8e4p1b4ce4jsn23e631b5c4d6'`. Внимание: копируем само значение!


3. **Переносим (клонируем) репозиторий к себе на ПК:**

	- переходите в Терминале в папку, куда планируете разместить репозиторий. Вводите команду:

		`git clone https://github.com/skurik2008/Telegram-bot.git`
			
		В результате у вас появится папка `Telegram-bot`.
	- перейдите (в терминале) в эту папку.


4. **Создаем виртуальное окружение:**

	- находясь в папке `Telegram-bot`, вводите команду `python -m venv venv`
	- далее вводите команду `venv\Scripts\activate.bat`

		В результате в папке `Telegram-bot` у вас появится папка `venv`


5. **Устанавливаем библиотеки `pyTelegramBot API` и `Python-dotenv`**:

	- вводите команду `pip install pyTelegramBotAPI`
	- по завершении вводите команду `pip install python-dotenv`


6. **Создаем файл `.env`**:

	- вводите команду `type .env.example > .env`

		Терминал выведет `Не удается найти указанный файл.` Это нормально, "едем" дальше!


7. **Вносим данные в файл `.env`**:

	- удобным способом заходите в папку `Telegram-bot`
	- открываете файл `.env` с помощью блокнота
	- записываете в него следующие данные:

	`token='сюда вставите токен бота'`

	`headers={"X-RapidAPI-Key": "сюда вставите ключ с сайта", "X-RapidAPI-Host": "hotels4.p.rapidapi.com"}`
	
	`url_id_city="https://hotels4.p.rapidapi.com/locations/v2/search"`
	
	`url_hotels="https://hotels4.p.rapidapi.com/properties/list"`
	
	`url_photos="https://hotels4.p.rapidapi.com/properties/get-hotel-photos"`


8. **Запускаем**:

	- в терминале введете команду `python main.py`
	